// Copyright (c) Aura development team - Licensed under GNU GPL
// For more information, see license file in the main folder

using System;
using Aura.Login.Network;
using Aura.Login.Util;
using Aura.Shared.Network;
using Aura.Shared.Util;

namespace Aura.Login
{
	class Program
	{
		static void Main(string[] args)
		{
			var packet = new byte[]
			{
				0x0, 0x0, 0x0, 0x1e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x20, 0x2, 0x0, 0x1, 0x1, 0x6, 0x0, 0x1b, 0x55,
				0x53, 0x41, 0x5f, 0x52, 0x65, 0x67, 0x75, 0x6c, 0x61, 0x72, 0x2d, 0x31, 0x41, 0x34, 0x41, 0x45, 0x42, 0x2d, 0x44,
				0x42, 0x30, 0x2d, 0x37, 0x33, 0x31, 0x0
			};

			var c = new MabiCipher();

			c.EncryptPacket(packet);

			c.DecryptPacket(packet);

			try
			{
				LoginServer.Instance.Run();
			}
			catch (Exception ex)
			{
				Log.Exception(ex, "An exception occured while starting the server.");
				CliUtil.Exit(1);
			}
		}
	}
}
